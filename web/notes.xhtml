<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
>
<link type="text/css" rel="stylesheet"
      href="/project/faces/javax.faces.resource/theme.css?ln=primefaces-casablanca"/>
<h:head>
    <title>
        Notes
    </title>
</h:head>
<h:body>

    <p:dataTable value="#{notesBean.notes.entrySet()}" var="entry"
                 style="border: none; width: 60%; margin-left: 20%; margin-top: 10%"
                 selectionMode="single" rowKey="#{entry.key}">
        <p:ajax event="rowSelect" listener="#{notesBean.openWidgetForNoteChanging}"/>

        <p:column>
            <h:outputText value="#{entry.value.get(0)}"/>
        </p:column>

        <p:column>
            <h:outputText value="#{entry.value.get(1)}"/>
        </p:column>
    </p:dataTable>
    <h:form>
        <p:commandButton icon="ui-icon-plusthick" actionListener="#{notesBean.openWidgetForAddingNote()}"
                         style="width: 60%; margin-left: 20%;"/>
    </h:form>
    <p:dialog widgetVar="adder" modal="true" draggable="false" resizable="false">
        <h:form>
            <p:inputText value="#{notesBean.noteTitle}"/>
            <p:inputText value="#{notesBean.noteContent}"/>
            <p:commandButton icon="ui-icon-plusthick" actionListener="#{notesBean.addNoteAndCloseWidget()}"/>
        </h:form>
    </p:dialog>
    <p:dialog widgetVar="changer" modal="true" draggable="false" resizable="false">
        <h:form>
            <p:inputText value="#{notesBean.noteTitle}"/>
            <p:inputText value="#{notesBean.noteContent}"/>
            <p:commandButton icon="ui-icon-check" actionListener="#{notesBean.setValueAndCloseWidget()}"/>
            <p:commandButton icon="ui-icon-trash" actionListener="#{notesBean.removeNoteAndCloseWidget()}"/>
        </h:form>
    </p:dialog>
</h:body>
</html>
